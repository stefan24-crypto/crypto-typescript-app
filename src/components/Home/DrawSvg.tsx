import React, { useLayoutEffect, useRef } from "react";
import { Link } from "react-router-dom";
import classes from "./DrawSvg.module.css";
import nft from "../../assets/nft1.png";
import blockchain from "../../assets/blockchain.png";
import web3 from "../../assets/world-wide-web.png";

const DrawSvg: React.FC = () => {
  const animate1Ref = useRef<SVGLineElement | null>(null);
  const animate2Ref = useRef<SVGPathElement | null>(null);
  const animate3Ref = useRef<SVGPathElement | null>(null);
  const animate4Ref = useRef<SVGPathElement | null>(null);
  const scrollEl = useRef<HTMLDivElement | null>(null);

  useLayoutEffect(() => {
    const animation = (theRef: any, isAnother: boolean) => {
      const rect = scrollEl.current?.getBoundingClientRect();
      let theLength = theRef.current!.getTotalLength();
      let scrollPercent;

      if (rect!.top <= 400) {
        theRef.current!.style.strokeDasharray! = String(theLength);
        theRef.current!.style.strokeDashoffset! = String(theLength);
        scrollPercent = Math.abs(rect!.top - 400) / rect!.height;

        const draw = theLength * scrollPercent;

        theRef.current!.style.strokeDashoffset = String(theLength - draw);
        theRef.current!.style.opacity = "1";
      } else {
        theRef.current!.style.opacity = "0";
      }
    };

    const func = () => {
      animation(animate1Ref, false);
      animation(animate2Ref, false);
      animation(animate3Ref, false);
      animation(animate4Ref, false);
    };

    if (animate1Ref.current && scrollEl.current) {
      document.addEventListener("scroll", func);
    }

    return () => document.removeEventListener("scroll", func);
  });

  return (
    <>
      <header className={classes.header}>
        <h2>Topics</h2>
      </header>
      <section className={classes.section} ref={scrollEl}>
        <div className={classes.side}>
          <div className={classes.first}>
            <div className={classes.img}>
              <img src={nft} alt="nft" />
            </div>
            <h2>NFT's</h2>
            <p>
              NFTâ€™s (Nun-Fungible tokens) are unique cryptographic tokens that
              exist on the blockchain and cannot be replicated. Like money,
              crypto is fungible meaning that it can be traded or exchanged for
              another. For example 1 Bitcoin is always equal in value to another
              Bitcoin.
            </p>
            <Link to="/nft" className={classes.link}>
              Read More
            </Link>
          </div>
          <div className={classes.svg2}>
            <svg viewBox="0 0 128 128">
              <path
                fill="none"
                stroke="white"
                strokeWidth="2px"
                ref={animate3Ref}
                d="M34.43 47.86L52.8 37.6V18.31a9.233 9.233 0 01-5.46-3.16L17.91 32.18c.35.98.54 2.03.54 3.13 0 .92-.13 1.8-.38 2.64l16.36 9.91zm11.35-35.38a9.231 9.231 0 01-.59-3.25c0-2.55 1.03-4.86 2.7-6.53S51.87 0 54.42 0c2.55 0 4.86 1.03 6.53 2.7a9.205 9.205 0 012.7 6.53c0 1.12-.2 2.19-.56 3.18l29.57 17.1c.21-.25.42-.5.65-.73a9.205 9.205 0 016.53-2.7c2.55 0 4.86 1.03 6.53 2.7a9.205 9.205 0 012.7 6.53c0 2.55-1.03 4.85-2.7 6.52a9.194 9.194 0 01-5.32 2.62v33.91c2.07.27 3.92 1.22 5.32 2.62 1.67 1.67 2.7 3.98 2.7 6.52a9.222 9.222 0 01-9.23 9.23 9.205 9.205 0 01-7.15-3.39l-29.61 17.12c.36.99.56 2.06.56 3.18 0 2.55-1.03 4.86-2.7 6.53a9.205 9.205 0 01-6.53 2.7c-2.55 0-4.86-1.03-6.53-2.7s-2.7-3.98-2.7-6.53c0-1.14.21-2.24.59-3.25L16.35 93.38a9.205 9.205 0 01-7.13 3.36c-2.55 0-4.86-1.03-6.53-2.7C1.03 92.37 0 90.06 0 87.51s1.03-4.85 2.7-6.52a9.242 9.242 0 015.25-2.62V44.44a9.18 9.18 0 01-5.25-2.62A9.164 9.164 0 010 35.3c0-2.55 1.03-4.86 2.7-6.53a9.205 9.205 0 016.53-2.7 9.205 9.205 0 017.16 3.4l29.39-16.99zm15.76 2.61a9.192 9.192 0 01-5.55 3.23V37.6l18.33 10.62 16.85-9.74c-.37-.99-.56-2.07-.56-3.18 0-1.08.19-2.13.53-3.09l-29.6-17.12zm36.69 29.3a9.159 9.159 0 01-4.92-2.56c-.19-.19-.37-.38-.54-.59l-16.82 9.72v20.78l16.89 9.75c.15-.17.3-.34.46-.5a9.194 9.194 0 014.92-2.56V44.39h.01zm-7.07 46.27c-.36-.98-.55-2.04-.55-3.14 0-1.16.21-2.27.61-3.3l-16.34-9.43-18.89 10.98v18.79a9.192 9.192 0 015.55 3.23l29.62-17.13zm-43.82 17.06a9.233 9.233 0 015.46-3.16V85.68l-18.96-11-16.09 9.29c.45 1.09.71 2.29.71 3.55 0 1.12-.2 2.19-.56 3.18l29.44 17.02zM10.76 78.41c1.93.32 3.66 1.25 4.99 2.58.1.1.19.2.28.3l16.39-9.46V50.36L16.64 40.8c-.27.37-.57.71-.89 1.03a9.255 9.255 0 01-4.99 2.58v34zM9.24 41.34c.04 0 .08-.01.12-.01h.08a6 6 0 004.06-1.76 6.023 6.023 0 001.77-4.27c0-1.67-.68-3.18-1.77-4.27-1.09-1.09-2.6-1.77-4.27-1.77s-3.18.68-4.27 1.77a6.023 6.023 0 00-1.77 4.27c0 1.67.68 3.18 1.77 4.27a6.03 6.03 0 004.28 1.77zm49.44 68.05a6.023 6.023 0 00-4.27-1.77c-1.67 0-3.18.68-4.27 1.77-1.09 1.09-1.77 2.6-1.77 4.27s.68 3.18 1.77 4.27 2.6 1.77 4.27 1.77c1.67 0 3.18-.68 4.27-1.77 1.09-1.09 1.77-2.6 1.77-4.27s-.67-3.18-1.77-4.27zm0-104.43a6.023 6.023 0 00-4.27-1.77c-1.67 0-3.18.68-4.27 1.77s-1.77 2.6-1.77 4.27c0 1.67.68 3.18 1.77 4.27a6.023 6.023 0 004.27 1.77c1.67 0 3.18-.68 4.27-1.77a6.023 6.023 0 001.77-4.27c0-1.67-.67-3.18-1.77-4.27zm45.42 78.29a6.023 6.023 0 00-4.27-1.77c-1.67 0-3.18.68-4.27 1.77a6.023 6.023 0 00-1.77 4.27c0 1.67.68 3.18 1.77 4.27a6.023 6.023 0 004.27 1.77c1.67 0 3.18-.68 4.27-1.77a6.023 6.023 0 001.77-4.27c0-1.67-.67-3.18-1.77-4.27zm-90.6 0c-1.09-1.09-2.6-1.77-4.27-1.77s-3.18.68-4.27 1.77a6.023 6.023 0 00-1.77 4.27c0 1.67.68 3.18 1.77 4.27s2.6 1.77 4.27 1.77 3.18-.68 4.27-1.77a6.023 6.023 0 001.77-4.27 6.065 6.065 0 00-1.77-4.27zm80.95-45.22c.08.08.14.18.2.28.06.1.1.2.14.31.23.34.49.66.77.95a6.023 6.023 0 004.27 1.77c1.67 0 3.18-.68 4.27-1.77a6.023 6.023 0 001.77-4.27c0-1.67-.68-3.18-1.77-4.27a6.023 6.023 0 00-4.27-1.77c-1.67 0-3.18.68-4.27 1.77a6.023 6.023 0 00-1.77 4.27c.01.99.25 1.91.66 2.73zM35.41 71.49a1.687 1.687 0 01.43.88l17.13 10.07V62.56L35.41 52.11v19.38zm37.56-19.11L55.96 62.57v19.89l17.01-10.05V52.38zM54.39 39.99l-16.6 9.93 16.69 10.05 16.21-9.84-16.3-10.14z"
              />
            </svg>
          </div>
          <div className={classes.third}>
            <div className={classes.img}>
              <img src={web3} alt="web3" />
            </div>
            <h2>Web 3</h2>
            <p>
              Web 3 is a decentralized but secure internet where people can
              exchange money and information without the need for an unnecessary
              middleman such as a bank or tech corporation.
            </p>
            <Link to="/web3" className={classes.link}>
              Read More
            </Link>
          </div>
        </div>
        <div className={classes.svg}>
          <svg className={classes.animate}>
            <line
              x1="50%"
              y1="0"
              x2="50%"
              y2="100%"
              fill="none"
              stroke="white"
              strokeWidth="2px"
              ref={animate1Ref}
            />
          </svg>
        </div>
        <div className={classes.side}>
          <div className={classes.svg1}>
            <svg viewBox="0 0 128 128">
              <path
                fill="none"
                stroke="white"
                strokeWidth="2px"
                ref={animate2Ref}
                d="M74.8 4c0 5.8-.1 13.1-.1 18.3 3 .5 5.9 1 8.8 1.6 4.1.9 7.9 2.5 11.4 5 8.5 6.2 9.6 24.3-2.2 30.3-.2.1-.4.3-.7.5 2.4 1.1 4.8 1.8 6.9 3.1 4.6 2.7 7.3 6.8 8 12.2.8 5.5.3 10.9-1.8 16-2.8 6.6-8 10.4-14.7 12-5.1 1.3-10.4 1.7-15.7 2.6-.3 0-.5.1-.9.1-.1 5.4-.1 12.3-.2 18.2h-11c0-5.7.1-12.6.1-18.2-2.9-.1-5.7-.2-8.8-.2-.1 5.5-.1 12.5-.2 18.4h-11c0-5.9.1-13 .1-18.7-7.5-.1-14.7-.2-22.2-.3.8-4.4 1.5-8.6 2.3-13.1H30.3c3.4 0 4.8-1.4 4.8-4.8.2-15.7.4-31.4.5-47.1 0-3.8-2-5.9-5.8-6.2-1.4-.1-2.8-.1-4.2-.1-1.4 0-2.8 0-4.4-.1 0-3.9.1-7.7.1-11.7 7.4.1 14.7.1 22.2.2.4-5 .5-12.2.5-18h11c0 5.7-.1 12.7-.1 17.9h8.8c.1-5.1.1-12.2.2-17.9h10.9M60.4 57c4.5 0 8.9-.3 13.2-1.8 4.4-1.4 6.9-4.5 7.1-8.8.2-4.1-1.8-7.4-5.9-9.2-4.5-2-9.3-2.3-14.1-2.3h-5.6c-.1 7.5-.1 14.7-.2 22 1.8 0 3.6.1 5.5.1m-5.3 11h-.5l-.3 24.2c1.8 0 3.5.1 5.2.1h.4c6.4-.1 12.9-.1 18.9-2.8 4-1.8 6.5-4.7 6.5-9.3 0-4.6-2.4-7.7-6.4-9.4-5.6-2.5-11.6-2.8-17.8-2.8h-6M74.8 0h-11c-2.2 0-4 1.8-4 4 0 2.4-.1 5.1-.1 7.7 0 2.1 0 4.2-.1 6.2h-.8v-6.3L59 4c0-1.1-.4-2.1-1.2-2.8C57.1.4 56.1 0 55 0H44c-2.2 0-4 1.8-4 4 0 2.5-.1 5.2-.1 7.9 0 2.2 0 4.3-.1 6.4l-6.1-.1-12-.2c-2.2 0-4 1.8-4 4l-.1 8.2v3.5c0 2.2 1.7 4 3.9 4h5.4c1 0 2 0 3 .1 1.8.1 2.1.6 2.1 2.2-.2 15.9-.3 32-.5 47.1 0 .4 0 .6-.1.8h-8.2c-1.9 0-3.6 1.4-3.9 3.3l-1.1 6.3-1.2 6.8c-.2 1.2.1 2.3.9 3.2s1.9 1.4 3 1.4h1.3l16.9.2v14.7c0 1.1.4 2.1 1.2 2.8.8.8 1.8 1.2 2.8 1.2h11c2.2 0 4-1.8 4-4 0-2.7.1-5.6.1-8.5 0-2 0-4 .1-5.9H59.1v14.2c0 1.1.4 2.1 1.2 2.8.8.8 1.8 1.2 2.8 1.2h11c2.2 0 4-1.8 4-4 0-2.7.1-5.6.1-8.5 0-2.2 0-4.3.1-6.4.8-.1 1.6-.2 2.3-.3 3.7-.5 7.5-1 11.2-2 8.3-2.1 14.3-7 17.4-14.4 2.3-5.5 3-11.6 2.1-18.1-1-6.6-4.4-11.8-10-15-.4-.2-.7-.4-1.1-.6 3.1-3.4 5-7.9 5.4-13.1.6-8.1-2.5-15.9-8.1-19.9-3.8-2.7-8-4.6-12.9-5.7-1.9-.4-3.8-.8-5.6-1.1v-6.9c0-2.7 0-5.4.1-7.9v-.2c-.3-1.7-2-3.5-4.3-3.5zm0 8zM59 38.8h1.6c4.9 0 8.8.3 12.5 2 2.5 1.1 3.7 2.9 3.6 5.4-.1 1.7-.6 4-4.4 5.3-3.3 1.1-7 1.6-11.9 1.6h-1.5v-3.8l.1-10.5zM58.6 72h2.5c5.4 0 11 .2 16.3 2.5 2.8 1.2 4 3 4 5.8 0 1.9-.5 4.1-4.1 5.7-5.3 2.3-11.1 2.4-17.2 2.4h-1.6l.1-12.8V72z"
              />
            </svg>
          </div>
          <div className={classes.second}>
            <div className={classes.img}>
              <img src={blockchain} alt="blockchain" />
            </div>
            <h2>Blockchain</h2>
            <p>
              Blockchain technology might be one of the most-hyped innovations
              of the 21st century. A blockchain is a public digital ledger of
              transactions maintained by a network of computers in a way that
              makes it difficult to have or alter.
            </p>
            <Link to="/blockchain" className={classes.link}>
              Read More
            </Link>
          </div>
          <div className={classes.svg1}>
            <svg viewBox="0 0 1000 1000">
              <path
                fill="none"
                stroke="white"
                strokeWidth="18px"
                ref={animate4Ref}
                d="M500,10c-0.1,0-0.3,0-0.4,0c-0.1,0-0.1,0-0.2,0c-0.2,0-0.4,0-0.6,0C228.7,10.6,10,229.8,10,500c0,270.2,218.7,489.3,488.8,490c0.2,0,0.4,0,0.6,0c0.1,0,0.1,0,0.2,0c0.2,0,0.3,0,0.4,0c270.6,0,490-219.4,490-490C990,229.4,770.6,10,500,10z M519.6,303.2c51.9-1.4,102.5-8.3,151.2-20.1c14.7,57.8,23.8,124.3,25.2,197.3H519.6V303.2z M519.6,264V52.3c52.8,14.6,106.4,85.1,140.5,193.1C614.8,256.3,567.9,262.7,519.6,264z M480.4,51.8V264c-48.7-1.4-96-7.8-141.6-19C373.2,136.4,427.2,65.7,480.4,51.8z M480.4,303.2v177.2H302.8c1.4-73.1,10.6-139.7,25.2-197.5C377.1,294.9,428,301.8,480.4,303.2z M263.3,480.4H49.7c4.3-100.8,41.9-193.1,102-266.2c43.6,24,89.9,43.7,138.4,58.4C274.3,335.1,264.8,405.6,263.3,480.4z M263.3,519.6c1.4,74.8,10.9,145.2,26.8,207.8c-48.5,14.7-94.8,34.4-138.4,58.5C91.6,712.7,54,620.4,49.7,519.6H263.3L263.3,519.6z M302.8,519.6h177.6v177C428,698,377.1,705,328,717C313.3,659.2,304.2,592.6,302.8,519.6z M480.4,735.7v212.4c-53.2-13.9-107.3-84.7-141.7-193.5C384.4,743.6,431.7,737.1,480.4,735.7z M519.6,947.7v-212c48.3,1.4,95.2,7.8,140.5,18.7C626,862.5,572.5,933.1,519.6,947.7z M519.6,696.6v-177H696c-1.4,72.9-10.5,139.4-25.2,197.1C622.1,704.8,571.6,698,519.6,696.6z M735.4,519.6h214.9c-4.3,100.8-41.8,193.1-101.9,266.2c-44-24.2-90.7-44-139.6-58.8C724.5,664.5,734,594.2,735.4,519.6z M735.4,480.4c-1.4-74.7-10.9-145.1-26.7-207.6c48.9-14.8,95.6-34.6,139.5-58.8c60.2,73.1,97.7,165.5,102.1,266.3L735.4,480.4L735.4,480.4z M821.2,184.1c-39,20.7-80.2,37.9-123.1,50.9C675.2,161.3,643,101.1,605,61.6C688.4,81.7,762.9,124.8,821.2,184.1z M393.5,62c-37.8,39.4-69.9,99.3-92.7,172.7c-42.6-13-83.4-30-122-50.6C236.7,125.2,310.6,82.2,393.5,62z M178.6,815.7c38.7-20.6,79.5-37.6,122.1-50.6c22.8,73.4,54.9,133.4,92.7,172.9C310.6,917.8,236.6,874.7,178.6,815.7z M604.9,938.3c38.1-39.5,70.3-99.7,93.2-173.6c43,13.1,84.2,30.2,123.2,51C763,875.1,688.5,918.3,604.9,938.3z"
              />
            </svg>
          </div>
        </div>
      </section>
    </>
  );
};

export default DrawSvg;
